This is not my code, it is from https://github.com/mpeterv/argparse/blob/master/src/argparse.lua